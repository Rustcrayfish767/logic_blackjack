#last updated 18:13 nov 12

#too do list 
#make a dealer
#make a betting system
#make the "split and double down features"
#trie to make the player stats in a file
#lord forgive me for what im about to code
import random
import math
import os.path


suits = ["of clubs", "of spades", "of dimond", "of hearts"]
cards = [2, 3, 4, 5, 6, 7, 8, 9, 10, 10, 10, 10, 1]
cards_hand = ["2", "3", "4", "5", "6", "7", "8", "9", "10", "kings", "queen", "jack", "ace"]
#hand view is the front end that prints out to the player only has string values
handview = []
#hand count is the backend counting that holds the int values
handcount = []
#dealers view that keeps data in strings
handview_dealer = []
#dealers hand that holds ints
handcount_dealer = []

def main():
  file_exists = os.path.exists('player.txt')
  if file_exists == False:
     f = open("player.txt", "w")
     x = input("please enter your name: ") 
     f.write(f'{x}\n1\n0/100')
     f.close()
     fn = open('player.txt', 'r')
     fnr=fn.readlines()
     name_new = fnr[0]
     q2 =input(f'\nhello {name_new}would you like to play\n(type y or yes)')
     if q2 == 'y' or q == "yes":
        handstart()
     else:
        main()
 
  elif file_exists == True:
    fr = open('player.txt', 'r')
    fro = fr.readlines()
    name = fro[0]
    q = input(f'\nhello {name}would you to play?\n(type y or yes): ')
    if q == 'y' or q == "yes":
        handstart()
    else:
        main()

def handstart():
    
    for d in range(2):
        dx = random.randrange(0,13)
        hand_dealer = cards[dx]
        handcount_dealer.append(hand_dealer)
        hand2_dealer = cards_hand[dx]
        handview.append(hand2_dealer)
        dy = random.randrange(0,3)
        hand_suit = suits[dy]
        handview.append(hand_suit)
    
    
    i = 1
    while i <= 2:
        #this part assiens the starting hand by getting a random int and matching it to the suits, cards and card hand lists 2 times
        x = random.randrange(0,13)
        hand = cards[x]
        handcount.append(hand)
        hand2 = cards_hand[x]
        handview.append(hand2)
        y = random.randrange(0,3)
        hand_suit = suits[y]
        handview.append(hand_suit)
        i += 1
    action()

def action():
    total = math.fsum(handcount)  
    #checks to see if the total is 21 and determen if the ace should be counted as a 11 or 1
    if 1 in handcount and total < 21:
        handcount.remove(1)
        handcount.append(11)
        total = math.fsum(handcount)  
    if 11 in handcount and total >= 21:
        handcount.remove(11)
        handcount.append(1)
        total = math.fsum(handcount)  
        
        
    #checks if the total is 21 or over to  see if its a bust or black jack
    if total > 21:
        print("\nyour cards are", ' '.join(handview), f'for a total of {total}')
        print('sorry thats bust\n')
        handview.clear()
        handcount.clear()
        handstart()  
    if total == 21:
        print("\nyour cards are", ' '.join(handview), f'for a total of {total}')
        print('BlackJack!\n')
        handview.clear()
        handcount.clear()
        handstart() 
    
    
    print("your cards are", ' '.join(handview), f'for a total of {total}')
    #this askes if you want to hit and if you type hit it adds a new card then starts the funtion agine to see if over or == 21
    hit = input('\nwould you like to hit or stand? ')
    if hit == "hit":
        x = random.randrange(0,13)
        hand = cards[x]
        handcount.append(hand)
        hand2 = cards_hand[x]
        handview.append(hand2)
        y = random.randrange(0,3)
        hand_suit = suits[y]
        handview.append(hand_suit)
    action()
    
    
main()
